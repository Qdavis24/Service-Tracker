<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Home</title>

    <link href="{{ url_for('static', filename='css/dist/output.css') }}" rel="stylesheet">
    <style>
        .visible {
            opacity: 1;
        }
    </style>
</head>
<body class="w-screen h-screen">
<picture class="fixed top-0 left-0 w-full h-full z-[-1]">
    <source media="(max-width: 767px)" srcset="../static/wrenches-iphone.jpg">
    <source media="(min-width: 768px)" srcset="../static/wrenches1.jpg">
    <img src="../static/wrenches.jpg" alt="Wrenches" class="w-full h-full object-cover">
</picture>

{% with messages = get_flashed_messages() %}
    {% if messages %}
        <ul class="z-50 fixed flash-message bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4 mb-4">
            {% for message in messages %}
                <li role="alert">{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}
{% endwith %}
<div class="container h-screen flex justify-center items-center mx-auto">
    <div class="fixed top-[20vh] text-center scroll-up" style="opacity:0;">
        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="white"
             class="bi bi-chevron-up mx-auto animate-bounce"
             viewBox="0 0 16 16">
            <path fill-rule="evenodd"
                  d="M7.646 4.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1-.708.708L8 5.707l-5.646 5.647a.5.5 0 0 1-.708-.708z"/>
        </svg>
        <br/>


    </div>
    <div class="fixed bottom-[20vh] text-center scroll-down">
        <p class="text-white text-2xl">scroll to see more</p>
        <br/>
        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="white"
             class="bi bi-chevron-down mx-auto animate-bounce"
             viewBox="0 0 16 16">
            <path fill-rule="evenodd"
                  d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708"/>
        </svg>
    </div>
</div>

<div class="flex flex-col justify-center items-center space-y-96">
    <div id="first" class="scroll-fade visible">
        <h1 class="text-left text-slateWhite text-7xl font-bold font-montserrat first-scroll">Service Tracker</h1>
        <p class="font-medium font-roboto text-left text-lightSteel text-4xl mb-5">Log all services performed on your
            vehicles</p>

        <button onclick="toggleModal(1)"
                class="bg-goldenYellow hover:bg-opacity-70 duration-700 text-charcoal font-bold py-2 px-4 rounded sm:text-7xl lg:text-2xl sm:w-80 sm:h-40 lg:w-auto lg:h-auto">
            Login
        </button>

        <button onclick="toggleModal(2)"
                class="mx-2 bg-goldenYellow hover:bg-opacity-70 duration-700 text-charcoal font-bold py-2 px-4 rounded sm:text-7xl lg:text-2xl sm:w-80 sm:h-40 lg:w-auto lg:h-auto">
            Register
        </button>

    </div>
    <div class="scroll-fade w-[50vw]">
        <h1 class="text-left text-7xl text-slateWhite font-bold font-montserrat">First add a vehicle.</h1>

        <p class="text-left text-lightSteel font-medium font-roboto text-4xl mt-2">Add a vehicle to your garage, specify
            the year, make, and
            model. Optionally add a picture of the vehicle!</p>

    </div>
    <div class="scroll-fade w-[50vw]">
        <h1 class="text-left text-7xl text-slateWhite font-bold font-montserrat">Next add your completed service.</h1>
        <p class="text-left text-lightSteel font-medium font-roboto text-4xl mt-2">Go to your garage and select the
            vehicle you have completed
            service on. Next click the add service button.</p>
    </div>
    <div class="scroll-fade w-[50vw] last-scroll">
        <h1 class="text-left text-7xl text-slateWhite font-bold font-montserrat">Finally, complete the service
            form.</h1>
        <p class="text-left text-lightSteel font-medium font-roboto text-4xl mt-2">Add the date, the name of the service
            completed, a description
            or story of the service, and optionally a picture of the service being completed. NOTE, if the date
            is left blank it will automatically store today's date.</p>
    </div>
    <div class="scroll-fade w-[50vw]">
        <h1 class="text-left text-7xl text-slateWhite font-bold font-montserrat">What are you waiting for? Sign up
            today!</h1>
        <p class="text-left text-lightSteel font-medium font-roboto text-4xl mt-2">Sign up so that we can keep track of
            your vehicle
            service history for you! Access your service history from anywhere with Service Tracker.</p>
    </div>
    <div id="dummy">

    </div>
</div>

<!-- LOGIN FORM MODAL !-->
<div class="fixed flex items-center justify-center inset-0 h-full w-full backdrop-blur-md"
     id="login-modal"
     style="display: none;">

    <!-- Modal Content -->
    <div class="relative mx-auto p-5 border border-lightSteel sm:w-screen lg:w-auto h-auto shadow-lg rounded-md bg-charcoal sm:text-5xl lg:text-2xl">
        <button onclick="toggleModal(0)"
                class="absolute top-3 right-3 flex items-center justify-center bg-transparent hover:bg-gray-200 rounded-full p-2">
            <svg fill="#000000" width="20" height="20" id="Capa_1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 460.77 460.77" xml:space="preserve"><g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier"> <path
                        d="M285.08,230.397L456.218,59.27c6.076-6.077,6.076-15.911,0-21.986L423.511,4.565c-2.913-2.911-6.866-4.55-10.992-4.55 c-4.127,0-8.08,1.639-10.993,4.55l-171.138,171.14L59.25,4.565c-2.913-2.911-6.866-4.55-10.993-4.55 c-4.126,0-8.08,1.639-10.992,4.55L4.558,37.284c-6.077,6.075-6.077,15.909,0,21.986l171.138,171.128L4.575,401.505 c-6.074,6.077-6.074,15.911,0,21.986l32.709,32.719c2.911,2.911,6.865,4.55,10.992,4.55c4.127,0,8.08-1.639,10.994-4.55 l171.117-171.12l171.118,171.12c2.913,2.911,6.866,4.55,10.993,4.55c4.128,0,8.081-1.639,10.992-4.55l32.709-32.719 c6.074-6.075,6.074-15.909,0-21.986L285.08,230.397z"></path> </g></svg>
        </button>
        <div class="mt-3 text-center">
            <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100">
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
                     width="256" height="256" viewBox="0 0 256 256" xml:space="preserve">


                        <g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;"
                           transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)">
	                        <path d="M 70.711 30.158 c 8.2 14.201 3.333 32.359 -10.867 40.556 c -14.201 8.2 -32.359 3.333 -40.556 -10.867 s -3.333 -32.359 10.867 -40.556 C 44.355 11.091 62.514 15.957 70.711 30.158 z"
                                  style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(81,126,217); fill-rule: nonzero; opacity: 1;"
                                  transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round"/>
                            <path d="M 32.538 7.061 c 0 2.685 -1.545 5.093 -3.929 6.327 c -0.476 0.245 -0.948 0.504 -1.416 0.774 c -0.468 0.27 -0.928 0.55 -1.378 0.84 c -2.26 1.448 -5.117 1.582 -7.443 0.239 c -3.378 -1.951 -7.696 -0.792 -9.645 2.584 l -5.4 9.352 c -1.951 3.378 -0.792 7.696 2.584 9.645 l 0.003 0.002 c 2.291 1.322 3.641 3.815 3.512 6.456 c -0.056 1.149 -0.057 2.301 0 3.455 c 0.128 2.638 -1.226 5.124 -3.513 6.444 L 5.911 53.18 c -3.378 1.951 -4.535 6.269 -2.584 9.645 l 5.4 9.352 c 1.951 3.378 6.269 4.535 9.645 2.584 l 0.002 -0.002 c 2.286 -1.321 5.117 -1.25 7.336 0.18 c 0.972 0.625 1.97 1.201 2.993 1.726 c 2.353 1.209 3.836 3.625 3.836 6.269 v 0.003 c 0 3.9 3.162 7.061 7.061 7.061 h 10.801 c 3.9 0 7.061 -3.162 7.061 -7.061 l 0 0 c 0 -2.685 1.545 -5.093 3.929 -6.327 c 0.475 -0.245 0.948 -0.504 1.416 -0.774 c 0.468 -0.27 0.928 -0.55 1.378 -0.84 c 2.26 -1.448 5.117 -1.582 7.443 -0.239 c 3.378 1.951 7.696 0.792 9.645 -2.584 l 5.4 -9.352 c 1.951 -3.378 0.792 -7.696 -2.584 -9.645 l -0.003 -0.002 c -2.291 -1.322 -3.641 -3.815 -3.512 -6.456 c 0.056 -1.149 0.057 -2.301 0 -3.455 c -0.128 -2.638 1.226 -5.124 3.513 -6.444 l 0.002 -0.002 c 3.378 -1.951 4.535 -6.268 2.584 -9.645 l -5.4 -9.352 c -1.949 -3.378 -6.268 -4.535 -9.645 -2.584 l -0.002 0.002 c -2.286 1.321 -5.117 1.25 -7.336 -0.18 c -0.972 -0.625 -1.97 -1.201 -2.993 -1.726 c -2.353 -1.209 -3.836 -3.625 -3.836 -6.269 V 7.061 c 0 -3.9 -3.162 -7.061 -7.061 -7.061 L 39.599 0 C 35.699 0 32.538 3.162 32.538 7.061 z M 67.038 32.279 c 7.028 12.172 2.857 27.736 -9.315 34.763 c -12.172 7.028 -27.736 2.857 -34.763 -9.315 s -2.857 -27.736 9.315 -34.763 C 44.447 15.935 60.012 20.107 67.038 32.279 z"
                                  style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(77,137,234); fill-rule: nonzero; opacity: 1;"
                                  transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round"/>
                            <path d="M 62.572 44.642 c 0 -4.887 -1.995 -9.307 -5.215 -12.492 c -0.957 -0.946 -2.586 -0.251 -2.586 1.095 v 8.994 c 0 2.894 -2.346 5.24 -5.24 5.24 h -9.062 c -2.894 0 -5.24 -2.346 -5.24 -5.24 v -8.993 c 0 -1.347 -1.63 -2.041 -2.587 -1.094 c -3.409 3.372 -5.445 8.129 -5.193 13.358 c 0.334 6.942 4.793 12.864 10.932 15.393 l 0 28.974 C 38.779 89.947 39.183 90 39.6 90 h 10.801 c 0.417 0 0.821 -0.053 1.218 -0.123 V 60.922 C 58.043 58.308 62.572 52.005 62.572 44.642 z"
                                  style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(240,240,240); fill-rule: nonzero; opacity: 1;"
                                  transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round"/>
                        </g>
                    </svg>
            </div>
            <h3 class="lg:text-lg sm:text-3xl font-medium text-slateWhite mt-2">Login to Your Account</h3>

            <form class="flex flex-col justify-center items-center mt-2 p-5 lg:space-y-3 sm:space-y-10 text-slateWhite"
                  method="post"
                  action="{{ url_for('main.index') }}">
                {{ login_form.hidden_tag() }}
                <div class="mt-5">
                    {{ login_form.email_username }}
                    {% if login_form.email_username.errors %}
                        <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative"
                             role="alert">
                            <strong class="font-bold">Oops!</strong>
                            {% for error in login_form.email_username.errors %}


                                <span class="block sm:inline">{{ error }}</span>


                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
                <div>
                    {{ login_form.password }}
                    {% if login_form.password.errors %}
                        <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative"
                             role="alert">
                            <strong class="font-bold">Oops!</strong>
                            {% for error in login_form.password.errors %}


                                <span class="block sm:inline">{{ error }}</span>

                            {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <div class="lg:w-[5vw] sm:w-[25vw] rounded-lg bg-goldenYellow text-darkerCharcoal font-medium font-roboto lg:p-1 sm:p-5 mt-20 hover:bg-opacity-70 duration-700">
                    {{ login_form.submit() }}
                </div>

            </form>
            <button onclick="toggleModal(2)"
                    class="flex items-center justify-center w-[10vw] h-[5vh] underline mt-2 p-5 mx-auto bg-transparent hover:text-electricBlue text-slateWhite">
                Register
            </button>

            <p class="lg:mt-2 sm:mt-10 lg:text-sm sm:text-2xl text-gray-500">We will never share your information
                with anyone.</p>

        </div>

    </div>


</div>

<!-- REGISTER FORM MODAL !-->
<div class="fixed flex items-center justify-center inset-0 overflow-y-auto h-full w-full backdrop-blur-md"
     id="register-modal"
     style="display: none;">

    <!-- Modal Content -->
    <div class="relative mx-auto p-5 border border-lightSteel sm:w-screen lg:w-auto h-auto shadow-lg rounded-md bg-charcoal sm:text-5xl lg:text-2xl">
        <button onclick="toggleModal(0)"
                class="absolute top-3 right-3 flex items-center justify-center bg-transparent hover:bg-gray-200 rounded-full p-2">
            <svg fill="#000000" width="20" height="20" id="Capa_1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 460.77 460.77" xml:space="preserve"><g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier"> <path
                        d="M285.08,230.397L456.218,59.27c6.076-6.077,6.076-15.911,0-21.986L423.511,4.565c-2.913-2.911-6.866-4.55-10.992-4.55 c-4.127,0-8.08,1.639-10.993,4.55l-171.138,171.14L59.25,4.565c-2.913-2.911-6.866-4.55-10.993-4.55 c-4.126,0-8.08,1.639-10.992,4.55L4.558,37.284c-6.077,6.075-6.077,15.909,0,21.986l171.138,171.128L4.575,401.505 c-6.074,6.077-6.074,15.911,0,21.986l32.709,32.719c2.911,2.911,6.865,4.55,10.992,4.55c4.127,0,8.08-1.639,10.994-4.55 l171.117-171.12l171.118,171.12c2.913,2.911,6.866,4.55,10.993,4.55c4.128,0,8.081-1.639,10.992-4.55l32.709-32.719 c6.074-6.075,6.074-15.909,0-21.986L285.08,230.397z"></path> </g></svg>
        </button>
        <div class="mt-3 text-center">
            <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100">
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                     width="256" height="256" viewBox="0 0 256 256" xml:space="preserve">

<defs>
</defs>
                    <g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;"
                       transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)">
	<path d="M 70.711 30.158 c 8.2 14.201 3.333 32.359 -10.867 40.556 c -14.201 8.2 -32.359 3.333 -40.556 -10.867 s -3.333 -32.359 10.867 -40.556 C 44.355 11.091 62.514 15.957 70.711 30.158 z"
          style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(81,126,217); fill-rule: nonzero; opacity: 1;"
          transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round"/>
                        <path d="M 32.538 7.061 c 0 2.685 -1.545 5.093 -3.929 6.327 c -0.476 0.245 -0.948 0.504 -1.416 0.774 c -0.468 0.27 -0.928 0.55 -1.378 0.84 c -2.26 1.448 -5.117 1.582 -7.443 0.239 c -3.378 -1.951 -7.696 -0.792 -9.645 2.584 l -5.4 9.352 c -1.951 3.378 -0.792 7.696 2.584 9.645 l 0.003 0.002 c 2.291 1.322 3.641 3.815 3.512 6.456 c -0.056 1.149 -0.057 2.301 0 3.455 c 0.128 2.638 -1.226 5.124 -3.513 6.444 L 5.911 53.18 c -3.378 1.951 -4.535 6.269 -2.584 9.645 l 5.4 9.352 c 1.951 3.378 6.269 4.535 9.645 2.584 l 0.002 -0.002 c 2.286 -1.321 5.117 -1.25 7.336 0.18 c 0.972 0.625 1.97 1.201 2.993 1.726 c 2.353 1.209 3.836 3.625 3.836 6.269 v 0.003 c 0 3.9 3.162 7.061 7.061 7.061 h 10.801 c 3.9 0 7.061 -3.162 7.061 -7.061 l 0 0 c 0 -2.685 1.545 -5.093 3.929 -6.327 c 0.475 -0.245 0.948 -0.504 1.416 -0.774 c 0.468 -0.27 0.928 -0.55 1.378 -0.84 c 2.26 -1.448 5.117 -1.582 7.443 -0.239 c 3.378 1.951 7.696 0.792 9.645 -2.584 l 5.4 -9.352 c 1.951 -3.378 0.792 -7.696 -2.584 -9.645 l -0.003 -0.002 c -2.291 -1.322 -3.641 -3.815 -3.512 -6.456 c 0.056 -1.149 0.057 -2.301 0 -3.455 c -0.128 -2.638 1.226 -5.124 3.513 -6.444 l 0.002 -0.002 c 3.378 -1.951 4.535 -6.268 2.584 -9.645 l -5.4 -9.352 c -1.949 -3.378 -6.268 -4.535 -9.645 -2.584 l -0.002 0.002 c -2.286 1.321 -5.117 1.25 -7.336 -0.18 c -0.972 -0.625 -1.97 -1.201 -2.993 -1.726 c -2.353 -1.209 -3.836 -3.625 -3.836 -6.269 V 7.061 c 0 -3.9 -3.162 -7.061 -7.061 -7.061 L 39.599 0 C 35.699 0 32.538 3.162 32.538 7.061 z M 67.038 32.279 c 7.028 12.172 2.857 27.736 -9.315 34.763 c -12.172 7.028 -27.736 2.857 -34.763 -9.315 s -2.857 -27.736 9.315 -34.763 C 44.447 15.935 60.012 20.107 67.038 32.279 z"
                              style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(77,137,234); fill-rule: nonzero; opacity: 1;"
                              transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round"/>
                        <path d="M 62.572 44.642 c 0 -4.887 -1.995 -9.307 -5.215 -12.492 c -0.957 -0.946 -2.586 -0.251 -2.586 1.095 v 8.994 c 0 2.894 -2.346 5.24 -5.24 5.24 h -9.062 c -2.894 0 -5.24 -2.346 -5.24 -5.24 v -8.993 c 0 -1.347 -1.63 -2.041 -2.587 -1.094 c -3.409 3.372 -5.445 8.129 -5.193 13.358 c 0.334 6.942 4.793 12.864 10.932 15.393 l 0 28.974 C 38.779 89.947 39.183 90 39.6 90 h 10.801 c 0.417 0 0.821 -0.053 1.218 -0.123 V 60.922 C 58.043 58.308 62.572 52.005 62.572 44.642 z"
                              style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(240,240,240); fill-rule: nonzero; opacity: 1;"
                              transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round"/>
</g>
</svg>
            </div>
            <h3 class="lg:text-lg sm:text-3xl font-medium text-slateWhite">Register an Account</h3>
            <!-- Login Form -->
            <form class="flex flex-col justify-center items-center mt-2 p-5 lg:space-y-3 sm:space-y-10" method="post"
                  action="{{ url_for('main.index') }}">
                {{ registration_form.hidden_tag() }}
                <div class="rounded-xl">
                    {{ registration_form.email }}
                    {% if registration_form.email.errors %}
                        {% for error in registration_form.email.errors %}
                            <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 mt-2 rounded"
                                 role="alert">
                                <strong class="font-bold">Oops!</strong>
                                <span class="block sm:inline">{{ error }}</span>
                            </div>
                        {% endfor %}
                    {% endif %}
                </div>
                <div class="rounded-md">
                    {{ registration_form.username }}
                    {% if registration_form.username.errors %}
                        <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative"
                             role="alert">
                            <strong class="font-bold">Oops!</strong>
                            {% for error in registration_form.username.errors %}


                                <span class="block sm:inline">{{ error }}</span>

                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
                <div class="rounded-md">
                    {{ registration_form.password }}
                    {% if registration_form.password.errors %}
                        <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative"
                             role="alert">
                            <strong class="font-bold">Oops!</strong>
                            {% for error in registration_form.password.errors %}


                                <span class="block sm:inline">{{ error }}</span>

                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
                <div class="rounded-md">
                    {{ registration_form.confirm_password }}
                </div>
                <div class="lg:w-[5vw] sm:w-[25vw] rounded-lg bg-goldenYellow text-darkerCharcoal font-medium font-roboto lg:p-1 sm:p-5 hover:bg-opacity-70 duration-700">
                    {{ registration_form.submit() }}
                </div>

            </form>
            <button onclick="toggleModal(1)"
                    class="flex items-center justify-center w-[20vw] h-[5vh] underline p-5 mx-auto bg-transparent hover:text-electricBlue text-slateWhite">
                Log In
            </button>

            <p class="lg:mt-2 sm:mt-10 lg:text-sm sm:text-2xl text-gray-500">We will never share your information
                with anyone.</p>

        </div>

    </div>


</div>

<script>
    function toggleModal(state) {
        const loginModal = document.getElementById('login-modal');
        const registerModal = document.getElementById('register-modal');
        if (state === 0) {
            loginModal.style.display = 'none';
            registerModal.style.display = 'none';
        } else if (state === 1) {
            registerModal.style.display = 'none';
            loginModal.style.display = 'flex';
        } else if (state === 2) {
            loginModal.style.display = 'none';
            registerModal.style.display = 'flex';

        }
    }

    document.addEventListener('DOMContentLoaded', function () {
        // apply animate-flash to all elements with alert roles (flash messages)
        const alertElements = document.querySelectorAll('[role="alert"]');
        alertElements.forEach(alert => {
            alert.classList.add("animate-flash");
        });
        // check if modal state is passed to frontend as param and toggle modal accordingly
        {% if modal_state %}
            toggleModal({{ modal_state }})
        {% endif %}

        // define all constants used in functions
        const midWindowHeight = window.innerHeight / 2;


        function setOpacity(el, value) {
            el.style.transition = 'opacity 1s ease-in-out';
            el.style.opacity = value;

        }

        // if the last element is above or at center change ui to show up arrow
        // else show down arrow
        function toggleArrowVis(mWH) {
            const scrollDown = document.querySelector('.scroll-down');
            const scrollUp = document.querySelector('.scroll-up');
            const lastScroll = document.querySelector('.last-scroll');
            let lastScrollRect = lastScroll.getBoundingClientRect();

            if (lastScrollRect.top <= mWH) {
                setOpacity(scrollUp, 1);
                setOpacity(scrollDown, 0);
            } else {
                setOpacity(scrollDown, 1);
                setOpacity(scrollUp, 0);

            }
        }

        // check each element for distance form center
        // if it is closer than last closest reset closest and least distance
        function retrieveClosest(mWH) {
            const elements = document.querySelectorAll('.scroll-fade');
            let closest = null;
            let leastDistance = Infinity;
            elements.forEach(el => {
                const rect = el.getBoundingClientRect();
                let distanceFromCenter = Math.abs((rect.top + rect.height / 2) - mWH);
                if (distanceFromCenter < leastDistance) {
                    leastDistance = distanceFromCenter;
                    closest = el;
                }
            });
            return closest;
        }

        // use direction to find the next element in the parent
        function findNext(closest, direction) {
            let next = null;
            if (direction === "down") {
                next = closest.nextElementSibling;
            } else {
                next = closest.previousElementSibling;
            }
            return next;
        }

        // scroll element into view smoothly to block center -> vertical center & inline center -> horizontal center
        function centerElement(el) {
            el.scrollIntoView({
                behavior: 'smooth',
                block: 'center',
                inline: 'center',
            })

        }

        // initialize vars
        // canExecute is flag to prevent auto scroll from happening multiple times in scroll event
        // timeout handles when canExecute is reset
        // scrollDirection is used to determine which sibling to scroll too
        // touchStartY grabs the first touch registered on screen and stores its y position
        // touchEndY grabs the last registered touch and stores its y position
        // used to calculate swipe direction just like scroll direction

        let canExecute = true;
        let timeout;
        let scrollDirection = 'down';
        let touchStartY = 0;
        let touchEndY = 0;

        function handleScroll(direction) {
            const last = document.getElementById('dummy');
            toggleArrowVis(midWindowHeight); // first toggle ui arrows before possible early return
            if (!canExecute) return; // if still waiting on timeout to reset flag early return
            let el = retrieveClosest(midWindowHeight); // retrieve the center most element
            el = findNext(el, direction) // find the next element to be scrolled into view based on direction of scroll
            if (!el || el === last) return; // if there is no next element IE last element in parent with down scroll early return
            setOpacity(el, 1); // set opacity of to be scrolled into view element to 1
            // set all sibling to 0 opacity
            [...el.parentElement.children] // spread operator to convert element collection into iterable array
                .filter(sibling => sibling !== el) // only keep elements that are not the current center element
                .forEach(s => setOpacity(s, 0)); // set all elements left to 0 opacity

            centerElement(el); // move to be scrolled to center

            canExecute = false; // reset flag
            clearTimeout(timeout); // reset timeout if scroll within 10 ms of last scroll
            timeout = setTimeout(() => { //after 10 ms reset flag
                canExecute = true;
            }, 10)
        }

        // auto position first element
        // by setting scroll events to passive IE no manual scrolling the DOC does not load as expected
        // this fixes that
        const first = document.getElementById('first');
        centerElement(first)
        // event listeners to trigger auto scroll logic
        // event listeners use preventDefault method and passive: false config to disable manual scrolling or swiping

        document.addEventListener('touchstart', (event) => {
            touchStartY = event.touches[0].clientY;
        }, {passive: false});

        document.addEventListener('touchmove', (event) => {
            event.preventDefault(); // Prevent default scrolling
        }, {passive: false});

        document.addEventListener('touchend', (event) => {
            touchEndY = event.changedTouches[0].clientY; // grabs the current position of the first touch registered when touch ends
            scrollDirection = touchStartY > touchEndY ? 'down' : 'up'; // determines direction Y value at top = 0 Y at bottom is greatest
            handleScroll(scrollDirection);                             // if the start y is greater than the end y finger swiped down
        }, {passive: false});

        document.addEventListener('wheel', (event) => {
            event.preventDefault();
            scrollDirection = event.deltaY > 0 ? 'down' : 'up'; // if change in y > 0 scroll was down
            handleScroll(scrollDirection)

        }, {passive: false});

    });
</script>
</body>
</html>